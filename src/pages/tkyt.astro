---
import BaseHead from '../components/BaseHead.astro'
import Header from '../components/Header.astro'
import Footer from '../components/Footer.astro'
import Posters from '../components/Posters.astro'
import { getCollection } from 'astro:content'

// @ts-ignore
function getSessionData(session) {
  return session.data
}
const upcoming = (
  await getCollection(
    'tkyt',
    ({ data: session }) => typeof session.url === 'undefined'
  )
)
  .sort(
    (a, b) => new Date(a.data.date).valueOf() - new Date(b.data.date).valueOf()
  )
  .map(getSessionData)

const sessions = (
  await getCollection(
    'tkyt',
    ({ data: session }) => typeof session.url === 'string'
  )
)
  .sort(
    (a, b) => new Date(b.data.date).valueOf() - new Date(a.data.date).valueOf()
  )
  .map(getSessionData)

const youtubeUrl = 'https://youtube.com/@dominuskelvin'
---

<!DOCTYPE html>
<html lang="en">
  <head>
    <BaseHead
      title="Teach Kelvin Your Thing - TKYT"
      description="Creators and developers get to teach me their 'Thing' for an hour by building something with it while I pick their brains.",
      image='/tkyt.png'
    />
  </head>
  <body class="bg-gray-50">
    <Header />
    <main class="min-h-screen">
      <div class="max-w-5xl mx-auto px-4 sm:px-10 py-12 lg:py-16">

        <header class="mb-12 lg:mb-16">
          <h1 class="text-4xl lg:text-5xl font-bold text-gray-900 mb-4">
            Learn web development with me
          </h1>
          <p class="text-lg text-gray-600 leading-relaxed">
            <span class="font-semibold text-purple-600">Teach Kelvin Your Thing</span> was created out of a need for me to learn not just new technologies but how folks who know these technologies use them.
          </p>
        </header>

        <section class="mb-16">
          <h2 class="text-2xl lg:text-3xl font-bold text-gray-900 mb-4">
            Upcoming
          </h2>
          <p class="text-base text-gray-600 mb-8 leading-relaxed">
            Here's who we'll be learning from next on <span class="font-semibold text-purple-600">Teach Kelvin Your Thing!</span> Get notified when new sessions are live by subscribing on <a href={youtubeUrl} target="_blank" class="text-green-600 font-medium hover:text-green-700">YouTube</a>.
          </p>
          <Posters sessions={upcoming} />
          <p class="text-base text-gray-600 mt-8">
            Want to sponsor upcoming TKYT sessions? Explore the <a href="https://dominuskelvin.notion.site/TKYT-sponsorship-94484c548041489eb7b181beaa287016" target="_blank" class="text-green-600 font-medium hover:text-green-700">sponsorship opportunities</a>.
          </p>
        </section>

        <section>
          <h2 class="text-2xl lg:text-3xl font-bold text-gray-900 mb-4">
            All Sessions
          </h2>
          <p class="text-base text-gray-600 mb-8 leading-relaxed">
            Watch all <span class="font-semibold text-gray-900">{sessions.length}</span> sessions of <span class="font-semibold text-purple-600">Teach Kelvin Your Thing</span> on YouTube. Show your support and get notified of new sessions by subscribing on <a href={youtubeUrl} target="_blank" class="text-green-600 font-medium hover:text-green-700">YouTube</a>.
          </p>
          <Posters sessions={sessions} />
        </section>
      </div>
    </main>
    <Footer />
  </body>
</html>
